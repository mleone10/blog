<!doctype html><html><head><link rel=stylesheet href=/css/ditalini.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css><title>Mario Leone | Warming Up for Advent of Code 2023</title></head><body><nav class="mainNav fullWidth"><h1><a href=https://mleone.dev>Mario Leone</a></h1><ul><li><a href=/about/>About Me</a></li><li><a href=https://mleone.dev/tags/>Tags</a></li></ul></nav><main><article class="single h-entry"><header><h2><a class="p-name u-url" href=https://mleone.dev/posts/aoc-2023-warmup/>Warming Up for Advent of Code 2023</a></h2><span class=byline><a class="p-author h-card" href=https://mleone.dev>Mario Leone</a>
&#183;&nbsp;<time class=dt-published datetime=2023-11-12T23:00:02-0500>
November 12, 2023</time>
&#183;
<a class=p-category href=https://mleone.dev/tags/advent-of-code/>Advent of Code</a>, <a class=p-category href=https://mleone.dev/tags/tech/>Tech</a>, <a class=p-category href=https://mleone.dev/tags/go/>Go</a></span></header><div class=e-content><p>Advent of Code 2023 is almost here, and I&rsquo;m managing my anticipation and excitement by starting on this year&rsquo;s repo, libraries, and scripts. To practice, I decided to revisit previous years&rsquo; puzzles and work through some of the ones I never solved.</p><h2 id=2015---day-18>2015 - Day 18</h2><p>Day 18 of 2015 featured a grid of lights which toggled on and off in a simulation Conway&rsquo;s Game of Life. I&rsquo;ve never actually implemented the &ldquo;game&rdquo; before, so this felt like a personal milestone!</p><p>I recognized that I&rsquo;d need a 2D grid of lights, which at first I representated as booleans. I also knew that I&rsquo;d need to implement a &ldquo;step&rdquo; mechanism to evaluate &ldquo;turns&rdquo; of the game. In the interest of developing a library of tools to aid my 2023 journey, I implemented all of this as generic <code>Map</code>/<code>Filter</code>/<code>Reduce</code> functions on a <a href=https://github.com/mleone10/advent-of-code-2023/blob/master/internal/grid/grid.go>generic <code>Grid</code> type</a>.</p><p>The core of the <code>Grid</code> type is a struct that has two methods: <code>Get</code> and <code>Set</code>. This type can be operated on by several functions:</p><ul><li><code>Map</code>, which applies a function to each element in the Grid</li><li><code>Filter</code>, which removes elements of a Grid which do not adhere to a given condition</li><li><code>Reduce</code>, which iterates over elements of a Grid and aggregates a result</li><li><code>Length</code>, which counts the number of elements in a Grid</li></ul><p>These common array functions unlock massive possibilities. For example, to count the number of lights in the Grid which are &ldquo;on&rdquo;, we use <code>Reduce</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>lg</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>LightGrid</span>) <span style=color:#a6e22e>NumOn</span>() <span style=color:#66d9ef>int</span> {
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>grid</span>.<span style=color:#a6e22e>Reduce</span>(<span style=color:#a6e22e>lg</span>.<span style=color:#a6e22e>grid</span>, <span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>g</span> <span style=color:#a6e22e>grid</span>.<span style=color:#a6e22e>Grid</span>[<span style=color:#f92672>*</span><span style=color:#a6e22e>Light</span>], <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>v</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Light</span>, <span style=color:#a6e22e>res</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>on</span> {
      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
    }
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span>
  })
}
</code></pre></div><p>To implement game&rsquo;s &ldquo;turns&rdquo;, we apply a function to each element with <code>Map</code>. The core of that mapping is a function which is applied to each light once per step:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>lightIsOn</span>(<span style=color:#a6e22e>g</span> <span style=color:#a6e22e>grid</span>.<span style=color:#a6e22e>Grid</span>[<span style=color:#f92672>*</span><span style=color:#a6e22e>Light</span>], <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>v</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Light</span>) <span style=color:#f92672>*</span><span style=color:#a6e22e>Light</span> {
  <span style=color:#75715e>// In part two, some of the lights are stuck on.  This early return covers that case.
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>v</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>); <span style=color:#a6e22e>ok</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>stuck</span> {
    <span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Light</span>{<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>on</span>, <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>stuck</span>}
  }

  <span style=color:#75715e>// Iterate through all eight neighbors of the current light and count which ones are on.
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>neighborsOn</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
  <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span> {
      <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>l</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>+</span><span style=color:#a6e22e>j</span>); <span style=color:#a6e22e>ok</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>l</span>.<span style=color:#a6e22e>on</span> <span style=color:#f92672>&amp;&amp;</span> !(<span style=color:#a6e22e>i</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
        <span style=color:#a6e22e>neighborsOn</span><span style=color:#f92672>++</span>
      }
    }
  }

  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Light</span>{
    <span style=color:#75715e>// This one line encapsulates the Game&#39;s rules: if a light is on and has two or three neighbors
</span><span style=color:#75715e></span>    <span style=color:#75715e>// that are also on, it stays on.  If it is off, it turns on if three neighbors are on.
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>on</span>:    (<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>on</span> <span style=color:#f92672>&amp;&amp;</span> (<span style=color:#a6e22e>neighborsOn</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>neighborsOn</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>)) <span style=color:#f92672>||</span> (!<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>on</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>neighborsOn</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>),
    <span style=color:#a6e22e>stuck</span>: <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>stuck</span>,
  }
}
</code></pre></div><p>My favorite part of this solution is that, looking at <a href=https://github.com/mleone10/advent-of-code-2023/blob/master/days/2015day18/day18.go>my solution code</a>, most of the custom implementation is that <code>lightIsOn</code> method. Most everything else, such as iteration over the grid and counting which lights are on, is handled by the generic Grid and the <code>Map</code>/<code>Filter</code>/<code>Reduce</code> functions. That&rsquo;s super satisfying!</p><section style=float:right;margin-right:2vh><h4 style=margin-bottom:0>Until next time,</h4><p style=margin-top:0;padding-left:2rem>&ndash; Mario Leone</p></section></div></article></main><footer class="fullWidth h-card"><img class=u-photo src=/profilePic.jpeg>
<span><p class=p-note>Hi, I'm Mario! Software engineering manager, actor, DIY-enthusiast. Trying new things every day and living life to the fullest!</p><p>&copy;
2023
<a class="p-name u-url u-uid" href=https://mleone.dev>Mario Leone</a>
<a class=u-url rel=me href=https://github.com/mleone10><i class="fa-brands fa-github"></i></a><a class=u-url rel=me href=https://linkedin.com/in/mleone5244><i class="fa-brands fa-linkedin"></i></a><a class=u-url rel=me href=https://hachyderm.io/@mleone><i class="fa-brands fa-mastodon"></i></a></p></span></footer></body></html>